<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="WordBuddy">
    <meta name="theme-color" content="#FF6B6B">
    
    <title>WordBuddy - Pronunciation Game</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="script.js" as="script">
    
    <!-- Favicon and app icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h1>WordBuddy</h1>
            <p>Loading your pronunciation adventure...</p>
        </div>
    </div>

    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen">
        <div class="screen-content">
            <div class="welcome-header">
                <h1>🎯 WordBuddy</h1>
                <p>Learn to say words!</p>
            </div>
            <div class="welcome-character">
                <div class="buddy-character">👶</div>
            </div>
            <button id="start-btn" class="big-button primary">
                <span>🚀 Start Playing!</span>
            </button>
            <div class="settings-icon" id="settings-btn">⚙️</div>
        </div>
    </div>

    <!-- Category Selection Screen -->
    <div id="category-screen" class="screen">
        <div class="screen-content">
            <div class="screen-header">
                <button class="back-btn" id="category-back-btn">← Back</button>
                <h2>Choose a Category</h2>
                <button class="mic-permission-btn" id="mic-permission-btn">
                    <span class="mic-icon">🎤</span>
                    <span class="mic-text">Allow Microphone</span>
                </button>
            </div>
            <div class="categories-container">
                <div class="categories-grid">
                    <button class="category-btn" data-category="animals">
                        <div class="category-icon">🐱</div>
                        <span>Animals</span>
                        <div class="progress-indicator" id="animals-progress"></div>
                    </button>
                    <button class="category-btn" data-category="alphabets">
                        <div class="category-icon">🔤</div>
                        <span>Alphabets</span>
                        <div class="progress-indicator" id="alphabets-progress"></div>
                    </button>
                    <button class="category-btn" data-category="days">
                        <div class="category-icon">📅</div>
                        <span>Days</span>
                        <div class="progress-indicator" id="days-progress"></div>
                    </button>
                    <button class="category-btn" data-category="months">
                        <div class="category-icon">🗓️</div>
                        <span>Months</span>
                        <div class="progress-indicator" id="months-progress"></div>
                    </button>
                    <button class="category-btn" data-category="colors">
                        <div class="category-icon">🌈</div>
                        <span>Colors</span>
                        <div class="progress-indicator" id="colors-progress"></div>
                    </button>
                    <button class="category-btn" data-category="numbers">
                        <div class="category-icon">🔢</div>
                        <span>Numbers</span>
                        <div class="progress-indicator" id="numbers-progress"></div>
                    </button>
                    <button class="category-btn" data-category="shapes">
                        <div class="category-icon">⭐</div>
                        <span>Shapes</span>
                        <div class="progress-indicator" id="shapes-progress"></div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <div class="screen-content">
            <div class="game-header">
                <button class="back-btn" id="game-back-btn">← Categories</button>
                <div class="progress-bar">
                    <div class="progress-fill" id="game-progress"></div>
                </div>
                <div class="score" id="current-score">⭐ 0/5</div>
            </div>
            
            <div class="word-display">
                <div class="word-image-container">
                    <img id="word-image" src="" alt="" class="word-image">
                </div>
                <h1 id="word-text" class="word-text">cat</h1>
                <div class="phonetic-hint" id="phonetic-hint">/kæt/</div>
            </div>
            
            <div class="game-controls">
                <button id="play-audio-btn" class="big-button secondary">
                    <span>🎤 Listen to Me</span>
                </button>
                <button id="repeat-btn" class="big-button accent">
                    <span>� Hear Word</span>
                </button>
                <button id="next-word-btn" class="big-button primary" disabled>
                    <span>➡️ Next Word</span>
                </button>
            </div>
            
            <div class="speech-controls" id="speech-controls">
                <button id="record-btn" class="big-button record">
                    <span>🔄 Practice Word</span>
                </button>
                <button id="good-job-btn" class="big-button success">
                    <span>👍 I Said It!</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Success Screen -->
    <div id="success-screen" class="screen">
        <div class="screen-content">
            <div class="success-animation">
                <div class="confetti"></div>
                <div class="celebration-character">🎉</div>
                <h1>Amazing Job!</h1>
                <p id="success-message">You completed 5 words!</p>
                <div class="stars-earned" id="stars-earned">
                    ⭐⭐⭐⭐⭐
                </div>
            </div>
            <div class="success-controls">
                <button id="play-again-btn" class="big-button primary">
                    <span>🔄 Play Again</span>
                </button>
                <button id="choose-category-btn" class="big-button secondary">
                    <span>📚 Choose Category</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Screen -->
    <div id="settings-screen" class="screen">
        <div class="screen-content">
            <div class="screen-header">
                <button class="back-btn" id="settings-back-btn">← Back</button>
                <h2>Settings</h2>
            </div>
            <div class="settings-options">
                <div class="setting-item">
                    <label>🔊 Sound Volume</label>
                    <input type="range" id="volume-slider" min="0" max="100" value="80" class="volume-slider">
                </div>
                <div class="setting-item">
                    <label>🎤 Speech Recognition</label>
                    <button id="speech-toggle" class="toggle-btn active">ON</button>
                </div>
                <div class="setting-item">
                    <button id="reset-progress-btn" class="big-button danger">
                        <span>🔄 Reset All Progress</span>
                    </button>
                </div>
                
                <!-- Troubleshooting Section -->
                <div class="troubleshooting-section">
                    <h3>🛠️ Microphone Troubleshooting</h3>
                    <div class="troubleshooting-tips">
                        <div class="tip-item">
                            <strong>📱 On Mobile:</strong>
                            <ul>
                                <li>Make sure microphone permission is granted in browser settings</li>
                                <li>Close other apps that might be using the microphone</li>
                                <li>Try refreshing the page if microphone stops working</li>
                                <li>Use "👍 I Said It!" button if microphone keeps failing</li>
                            </ul>
                        </div>
                        <div class="tip-item">
                            <strong>🌐 Browser Tips:</strong>
                            <ul>
                                <li>Chrome/Safari work best for speech recognition</li>
                                <li>Make sure your internet connection is stable</li>
                                <li>Speak clearly and close to your device</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="word-audio" preload="none"></audio>

    <!-- Game Script -->
    <script src="script.js"></script>
</body>
</html>
